<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Car Racing Game - Top Level</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: #000; overflow: hidden; }
        #gameContainer { position: relative; width: 100vw; height: 100vh; }
        #gameCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .ui-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; transition: opacity 0.5s ease; background-color: rgba(0, 0, 0, 0.6); }
        .ui-screen.hidden { opacity: 0; pointer-events: none; }
        
        /* --- UI STYLES --- */
        #startScreen h1 { font-size: 13vw; margin-bottom: 25px; text-shadow: 4px 4px 8px #000; }
        .difficulty-btn { font-size: 5.5vw; padding: 20px; cursor: pointer; background: linear-gradient(145deg, #28a745, #218838); color: white; border: none; border-radius: 15px; font-weight: bold; box-shadow: 0 6px #1e7e34; width: 280px; max-width: 70vw; transition: all 0.1s ease; margin-top: 20px; }
        .difficulty-btn:active { box-shadow: 0 2px #1e7e34; transform: translateY(4px); }
        
        /* In-Game Controls */
        .control-btn { position: absolute; bottom: 30px; width: 80px; height: 80px; background-color: rgba(0, 0, 0, 0.4); border-radius: 50%; color: white; font-size: 50px; display: flex; justify-content: center; align-items: center; user-select: none; z-index: 12; }
        #leftButton { left: 30px; }
        #rightButton { right: 30px; }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <div id="uiLayer">
            <div id="startScreen" class="ui-screen">
                <h1>Car Racing</h1>
                <button id="startButton" class="difficulty-btn">Start Game</button>
            </div>

            <!-- In-Game Controls -->
            <div id="gameControls" class="ui-screen hidden" style="background: transparent;">
                <div id="leftButton" class="control-btn">◀</div>
                <div id="rightButton" class="control-btn">▶</div>
            </div>
        </div>
    </div>

    <script>
    // === CAR KO CANVAS PAR ADD KARNE KA CODE ===

    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // UI Elements
    const startScreen = document.getElementById('startScreen');
    const startButton = document.getElementById('startButton');
    const gameControls = document.getElementById('gameControls');
    const leftButton = document.getElementById('leftButton');
    const rightButton = document.getElementById('rightButton');

    // Game State
    let isGameRunning = false;
    let isMovingLeft = false;
    let isMovingRight = false;

    // Player Car Properties
    const playerCar = {
        x: 0, y: 0,
        width: 0, height: 0,
        speed: 7,
        img: new Image()
    };
    
    // --- Asset Loading ---
    playerCar.img.src = 'player_car.png';
    playerCar.img.onload = () => {
        // Car ka size set karte hain screen ke hisaab se
        const aspectRatio = playerCar.img.width / playerCar.img.height;
        playerCar.width = canvas.width * 0.15; // Car screen ki 15% width legi
        playerCar.height = playerCar.width / aspectRatio;
        
        // Initial Position
        resetPlayer();
    };

    function resetPlayer() {
        playerCar.x = canvas.width / 2 - playerCar.width / 2;
        playerCar.y = canvas.height - playerCar.height - 20; // Screen ke neeche
    }

    // --- The Main Game Loop ---
    function gameLoop() {
        if (!isGameRunning) return;
        update();
        draw();
        requestAnimationFrame(gameLoop);
    }

    // --- Update Function (Movement Logic) ---
    function update() {
        const roadLeftBoundary = canvas.width * 0.2;
        const roadRightBoundary = canvas.width * 0.8 - playerCar.width;

        if (isMovingLeft && playerCar.x > roadLeftBoundary) {
            playerCar.x -= playerCar.speed;
        }
        if (isMovingRight && playerCar.x < roadRightBoundary) {
            playerCar.x += playerCar.speed;
        }
    }

    // --- Draw Function (Visuals) ---
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw Road
        ctx.fillStyle = '#4a4a4a';
        ctx.fillRect(canvas.width * 0.2, 0, canvas.width * 0.6, canvas.height);

        // Draw Car
        if (playerCar.img.complete) { // Check if image is loaded
            ctx.drawImage(playerCar.img, playerCar.x, playerCar.y, playerCar.width, playerCar.height);
        }
    }

    // --- Game Controls ---
    function startGame() {
        isGameRunning = true;
        resetPlayer();
        startScreen.classList.add('hidden');
        gameControls.classList.remove('hidden');
        gameLoop();
    }

    // --- Event Listeners for Controls ---
    startButton.addEventListener('click', startGame);

    // Keyboard controls
    window.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') isMovingLeft = true;
        if (e.key === 'ArrowRight') isMovingRight = true;
    });
    window.addEventListener('keyup', (e) => {
        if (e.key === 'ArrowLeft') isMovingLeft = false;
        if (e.key === 'ArrowRight') isMovingRight = false;
    });

    // Touch controls
    leftButton.addEventListener('touchstart', () => isMovingLeft = true);
    leftButton.addEventListener('touchend', () => isMovingLeft = false);
    rightButton.addEventListener('touchstart', () => isMovingRight = true);
    rightButton.addEventListener('touchend', () => isMovingRight = false);
    // For Mouse Clicks on Desktop
    leftButton.addEventListener('mousedown', () => isMovingLeft = true);
    leftButton.addEventListener('mouseup', () => isMovingLeft = false);
    rightButton.addEventListener('mousedown', () => isMovingRight = true);
    rightButton.addEventListener('mouseup', () => isMovingRight = false);

    </script>
</body>
</html>

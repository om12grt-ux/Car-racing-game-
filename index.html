<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Car Racing Game</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; } initial-scale=1.0, user-scalable=no">
    <title>Car Racing Game</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; } body { background-color: #111; overflow: hidden; font-family: 'Arial', sans-serif; } #gameContainer { position: relative; width: 100vw; height: 100vh; -webkit-tap-highlight-color: transparent; overflow: hidden; } canvas { width: 100%; height: 100%; display: block; }
        .control-btn { position: absolute body { background-color: #111; overflow: hidden; font-family: 'Arial', sans-serif; } #gameContainer { position: relative; width: 100vw; height: 100vh; -webkit-tap-highlight-color: transparent; overflow: hidden; } canvas { width: 100%; height: 100%; display: block; }
        .control-btn { position: absolute; bottom: 12vh; width: 18vmin; height: 18vmin; max-width:; bottom: 12vh; width: 18vmin; height: 18vmin; max-width: 90px; max-height: 90px; background-color: transparent; border: none; background 90px; max-height: 90px; background-color: transparent; border: none; background-size: contain; background-repeat: no-repeat; background-position: center; cursor: pointer; user-select: none; z-index: 110; } #leftButton { background-image: url-size: contain; background-repeat: no-repeat; background-position: center; cursor: pointer; user('left_btn.png'); left: 5vw; } #rightButton { background-image: url('-select: none; z-index: 110; } #leftButton { background-image: urlright_btn.png'); right: 5vw; } #settingsButton { position: absolute; top: 2('left_btn.png'); left: 5vw; } #rightButton { background-image: url('vh; right: 3vw; width: 12vmin; height: 12vmin; max-widthright_btn.png'); right: 5vw; } #settingsButton { position: absolute; top: 2: 50px; max-height: 50px; background: url('settings_btn.pngvh; right: 3vw; width: 12vmin; height: 12vmin; max-width') no-repeat center center / contain; border: none; cursor: pointer; z-index: 11;: 50px; max-height: 50px; background: url('settings_btn.png }
        .game-over-btn { background-color: transparent; border: none; width: 70%; max-width: 300px; height: 80px; cursor: pointer; transition') no-repeat center center / contain; border: none; cursor: pointer; z-index: 11; }
        .game-over-btn { background-color: transparent; border: none; width: 70%; max-width: 300px; height: 80px; cursor: pointer; transition: transform 0.2s; background-size: 100% 100%; background-repeat: no-repeat: transform 0.2s; background-size: 100% 100%; background-repeat: no-repeat; display: flex; justify-content: center; align-items: center; gap: 10px; color: white; font-size: 5vmin; font-weight: bold; text-shadow; display: flex; justify-content: center; align-items: center; gap: 10px; color: 2px 2px 4px #000; } #continueBtn { background-image: url('continue: white; font-size: 5vmin; font-weight: bold; text-shadow: 2px 2_btn.png'); } #retryBtn { background-image: url('retry_btn.png'); } .px 4px #000; } #continueBtn { background-image: url('continue_btn.pnggame-over-btn img { width: 6vmin; max-width: 30px; } .game-'); } #retryBtn { background-image: url('retry_btn.png'); } .game-over-over-btn:disabled { filter: grayscale(80%) opacity(0.6); cursor: not-allowed; } #gameOverBackBtn { background: url('close_btn.png') no-repeat center center / contain; width: 5btn img { width: 6vmin; max-width: 30px; } .game-over-btn:0px; height: 50px; border: none; cursor: pointer; margin-top: 1disabled { filter: grayscale(80%) opacity(0.6); cursor: not-allowed; } #gameOver5px; }
        .modal-close-btn { position: absolute; top: 15px; right:BackBtn { background: url('close_btn.png') no-repeat center center / contain; width: 5 15px; background: url('close_btn.png') no-repeat center center / contain; width0px; height: 50px; border: none; cursor: pointer; margin-top: 1: 40px; height: 40px; border: none; cursor: pointer; }
        #5px; }
        .modal-close-btn { position: absolute; top: 15px; rightgameOverModal { position: fixed; top: 0; left: 0; width: 100%; height: 15px; background: url('close_btn.png') no-repeat center center / contain; width: 100%; background-color: rgba(0, 0, 0, 0.85);: 40px; height: 40px; border: none; cursor: pointer; }
        # z-index: 100; display: flex; flex-direction: column; justify-content: center; aligngameOverModal { position: fixed; top: 0; left: 0; width: 100%; height-items: center; color: white; animation: fadeIn 0.5s ease-out; } @keyframes fadeIn {: 100%; background-color: rgba(0, 0, 0, 0.85); z from { opacity: 0; } to { opacity: 1; } } #gameOverTitle { font-size: -index: 100; display: flex; flex-direction: column; justify-content: center; align-items15vmin; text-shadow: 3px 3px 5px #000; } #final: center; color: white; animation: fadeIn 0.5s ease-out; } @keyframes fadeIn {Score { font-size: 8vmin; margin: 20px 0; } #gameOverButtons { display from { opacity: 0; } to { opacity: 1; } } #gameOverTitle { font-size: : flex; flex-direction: column; gap: 10px; align-items: center; width: 1015vmin; text-shadow: 3px 3px 5px #000; } #0%; } .game-over-btn:active { transform: scale(0.95); } #customAlertModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8finalScore { font-size: 8vmin; margin: 20px 0; } #gameOverButtons { display: flex; flex-direction: column; gap: 10px; align-items: center; width: 100%; } .game-over-btn:active { transform: scale(0.95);); z-index: 100; display: flex; justify-content: center; align-items: center; } .custom-alert-box { background-color: #2c2c2c; color: white; padding: 2 } #customAlertModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); z-index: 100; display: flex; justify-content: center; align-items5px; border-radius: 15px; border: 2px solid #555; width: 90%; max-width: 350px; text-align: center; box-shadow: 0 : center; } .custom-alert-box { background-color: #2c2c2c; color: white;5px 20px rgba(0,0,0,0.5); animation: fadeIn 0.3s ease padding: 25px; border-radius: 15px; border: 2px solid #5-out; } .custom-alert-box img#alertLogo { width: 80px; height: 8055; width: 90%; max-width: 350px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.5); animationpx; margin-bottom: 15px; } .custom-alert-box h2#alertTitle { color: #FFD700; margin-bottom: 15px; font-size: 22px: fadeIn 0.3s ease-out; } .custom-alert-box img#alertLogo { width; } .custom-alert-box p#alertMessage { font-size: 16px; line-height:: 80px; height: 80px; margin-bottom: 15px; } .custom- 1.5; margin-bottom: 25px; } .custom-alert-buttons { display: flexalert-box h2#alertTitle { color: #FFD700; margin-bottom: 15px; font-size: 22px; } .custom-alert-box p#alertMessage { font-size: 16px; line-height: 1.5; margin-bottom: 25px; } .custom-alert-buttons { display: flex; justify-content: space-around; } .custom-alert-buttons button { padding: 12px 25px; border: none; border-radius: 8px;; justify-content: space-around; } .custom-alert-buttons button { padding: 12px  font-size: 16px; font-weight: bold; cursor: pointer; transition: transform 025px; border: none; border-radius: 8px; font-size: 16px.2s; width: 45%; } .custom-alert-buttons button:active { transform: scale(0; font-weight: bold; cursor: pointer; transition: transform 0.2s; width: 45%; } .custom-alert-buttons button:active { transform: scale(0.95); } button.95); } button#alertConfirmBtn { background-color: #4CAF50; color: white; }#alertConfirmBtn { background-color: #4CAF50; color: white; } button#alertCancelBtn { background-color: #f44336; color: white; } button#alertOkBtn { background-color: #2196F3; color: white; width: 100%; } button#alertCancelBtn { background-color: #f44336; color: white; } button #bannerAdContainer { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 728px; height: 90px;#alertOkBtn { background-color: #2196F3; color: white; width: 100%; } #bannerAdContainer { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 728px; height: 90px; background-color: rgba(10, 10, 10, 0.5); z-index: 50; display: flex; justify-content: center; align-items: center; } #coinDisplay { position: absolute; top: 2vh; left: 3vw; background-color: rgba(0,0,0,0.6); color: #FFD700; padding: 1 background-color: rgba(10, 10, 10, 0.5); z-index: 50; display: flex; justify-content: center; align-items: center; } #coinDisplay { position: absolute.5vh 3vw; border-radius: 50px; font-size: 5vmin; font-weight: bold; display: flex; align-items: center; gap: 10px; z-index: 11; border: 2px solid #FFD700; } #coinDisplay img { width: 6vmin; height: 6vmin; max-width: 30px; max-height: 3; top: 2vh; left: 3vw; background-color: rgba(0,0,0,0.6); color: #FFD700; padding: 1.5vh 3vw; border-radius: 50px; font-size: 5vmin; font-weight: bold; display: flex; align0px; } #startScreen { position: absolute; top: 0; left: 0; width: 1-items: center; gap: 10px; z-index: 11; border: 2px solid #FFD700; } #coinDisplay img { width: 6vmin; height: 6vmin00%; height: 100%; background-color: rgba(0, 0, 0,; max-width: 30px; max-height: 30px; } #startScreen { position: absolute; top: 0; left: 0; width: 100%; height: 10 0.4); color: white; display: flex; flex-direction: column; justify-content: center; align0%; background-color: rgba(0, 0, 0, 0.4); color: white-items: center; z-index: 10; } #startScreen h1 { font-size: 10vw; margin-bottom: 20px; text-shadow: 3px 3px 5px #000; } #difficultySelector { display: flex; flex-direction: column; gap: 20px; align-items: center; } #rewardButton { background-color: #4CAF50; color: white; border: 2px solid white; border-radius: 10px; padding: 10px 20px; margin-top: 25px; font-size: 4vmin; font-weight:; display: flex; flex-direction: column; justify-content: center; align-items: center; z bold; cursor: pointer; display: flex; align-items: center; gap: 10px; } #-index: 10; } #startScreen h1 { font-size: 10vw; margin-bottom: 20px; text-shadow: 3px 3px 5px #000; } #difficultySelector { display: flex; flex-direction: column; gap: 20px;rewardButton img { width: 24px; height: 24px; } .difficulty-btn { cursor align-items: center; } #rewardButton { background-color: #4CAF50; color: white; border: 2px solid white; border-radius: 10px; padding: 10px : pointer; border: none; background-color: transparent; width: 250px; max-width: 20px; margin-top: 25px; font-size: 4vmin; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 10px; } #rewardButton img { width: 24px; height: 24px; } .difficulty-btn { cursor60vw; height: 80px; background-size: contain; background-repeat: no-repeat; background-: pointer; border: none; background-color: transparent; width: 250px; max-width: 60vw; height: 80px; background-size: contain; background-repeat: no-repeat; background-position: center; transition: transform 0.2s; } .difficulty-btn:active { transform: scale(0.95); } #easyButton { background-image: url('easy.png'); } #mediumButton { background-image: url('medium.png'); } #hardButton { background-image: url('hard.png'); } .modal { position: absolute; top: 0; left: 0; width: 100%; heightposition: center; transition: transform 0.2s; } .difficulty-btn:active { transform: scale(0.95); } #easyButton { background-image: url('easy.png'); } #mediumButton { background-image: url('medium.png'); } #hardButton { background-image: url('hard.png');: 100%; background-color: rgba(0, 0, 0, 0.8 } .modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); color: white; z-index: 20; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; } .modal h2 { font-size: 8vw; margin-bottom: 20px; } .modal-content { background-color: rgba(0,0,0,0.4); padding: 20px; border-radius: 10px; position: relative; display: flex; flex-direction: column; gap: 20px; width: 90%; max-width: 450px; max-height: 85vh; overflow-y: auto; align-items: center;} #carSelection { display: grid; grid-template-columns: repeat(25); color: white; z-index: 20; display: flex; flex-direction: column; justify-content, 1fr); gap: 20px; width:100%;} .car-option { background-color: center; align-items: center; padding: 20px; } .modal h2 { font-: rgba(255, 255, 255, 0.1); border: 2pxsize: 8vw; margin-bottom: 20px; } .modal-content { background-color: rgba(0,0,0,0.4); padding: 20px; border-radius: 10px; position: relative; display: flex; flex-direction: column; gap: 20px; width: 90%; max-width: 450px; max-height: 85vh; overflow-y: auto; align-items: center;} #carSelection { display: grid; grid-template-columns solid #4CAF50; border-radius: 10px; padding: 10px; text-align:: repeat(2, 1fr); gap: 20px; width:100%;} .car center; cursor: pointer; transition: transform 0.2s, background-color 0.2s; display-option { background-color: rgba(255, 255, 255, 0.: flex; flex-direction: column; justify-content: space-between; align-items: center; }1); border: 2px solid #4CAF50; border-radius: 10px; padding:  .car-option.selected { border-color: #FFD700; background-color: rgba(710px; text-align: center; cursor: pointer; transition: transform 0.2s, background-color 6, 175, 80, 0.5); transform: scale(1.05); } .car-option img { width: 80px; height: auto; max-width: 1000.2s; display: flex; flex-direction: column; justify-content: space-between; align-items%; } .car-option p { margin-top: 10px; font-weight: bold; } .car: center; } .car-option.selected { border-color: #FFD700; background-color: rgba-option.locked { cursor: default; background-color: rgba(0,0,0,0.5); border(76, 175, 80, 0.5); transform: scale(1.05-color: #555; position: relative; } .car-option.locked::after { content: 'ðŸ”’); } .car-option img { width: 80px; height: auto; max-width: 10'; position: absolute; top: 5px; right: 5px; font-size: 24px0%; } .car-option p { margin-top: 10px; font-weight: bold; } .; text-shadow: 1px 1px 2px black; } .buy-btn { background-color: #car-option.locked { cursor: default; background-color: rgba(0,0,0,0.5); border-color: #555; position: relative; } .car-option.locked::after { content: 'ðŸ”’FFC107; color: black; border: none; border-radius: 5px; padding: 8px 12px; margin-top: 10px; cursor: pointer; font-weight: bold; width'; position: absolute; top: 5px; right: 5px; font-size: 24px;: 100%; } .buy-btn:disabled { background-color: #777; cursor: not- text-shadow: 1px 1px 2px black; } .buy-btn { background-color: #allowed; color: #ccc; } .price-tag { display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 16px; font-weight: bold;FFC107; color: black; border: none; border-radius: 5px; padding: 8px 12px; margin-top: 10px; cursor: pointer; font-weight: bold; width: 100%; } .buy-btn:disabled { background-color: #777; cursor color: #FFD700; } .price-tag img { width: 18px; height: : not-allowed; color: #ccc; } .price-tag { display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 16px; font-weight:18px; } .modal-button { margin-top: 10px; padding: 2vh 4vw; font-size: 4vw; color: white; border: none; border-radius: 10px; bold; color: #FFD700; } .price-tag img { width: 18px; height: cursor: pointer; }
        .settings-option { display: flex; flex-direction: column; align-items: center 18px; } .modal-button { margin-top: 10px; padding: 2vh 4vw; font-size: 4vw; color: white; border: none; border-radius: 10px; cursor: pointer; } .settings-option { display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%;} .settings-option label; gap: 10px; width: 100%;} .settings-option label { font-size: 4vw; } input[type="range"] { width: 100%; } #positionControlsButton { background-color: #FFC107; color: black; }
        #magnetTimer { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background-color: rgba { font-size: 4vw; } input[type="range"] { width: 100%; } #positionControlsButton { background-color: #FFC107; color: black; }
        #magnet(0,0,0,0.6); color: white; padding: 1.5vh 3vw; border-radius: 20px; font-size: 4vmin; font-weight: boldTimer { position: absolute; top: 20px; left: 50%; transform: translateX(-50; display: flex; align-items: center; gap: 10px; z-index: 5; }%); background-color: rgba(0,0,0,0.6); color: white; padding: 1 #magnetTimer img { width: 30px; height: 30px; } .hidden { display.5vh 3vw; border-radius: 20px; font-size: 4vmin;: none !important; } .game-object { position: absolute; filter: drop-shadow(4px 4px 3px rgba(0,0,0,0.5)); } #playerCarElement { z-index:  font-weight: bold; display: flex; align-items: center; gap: 10px; z-index: 5; } #magnetTimer img { width: 30px; height: 30px; }4; }
        
        #positioningOverlay { position: fixed; top: 0; left: 0; width .hidden { display: none !important; } .game-object { position: absolute; filter: drop-shadow(: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); z-index: 90; display: flex; color: white; align4px 4px 3px rgba(0,0,0,0.5)); } #playerCar-items: center; flex-direction: column; justify-content: space-between; padding: 20Element { z-index: 4; }
        
        #positioningOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-colorvh 0 10vh 0; }
        .positioning-text { text-align: center: rgba(0, 0, 0, 0.85); z-index: 90; display:; padding: 20px; background-color: rgba(0,0,0,0.5); border-radius: 10px; font-size: 4vmin; }
        #positioningOverlay . flex; color: white; align-items: center; flex-direction: column; justify-content: space-between; padding: 20vh 0 10vh 0; }
        .positioning-textmodal-button { background-color: #4CAF50; width: 60vw; max-width:  { text-align: center; padding: 20px; background-color: rgba(0,0,0,0250px; }

        .promo-image { max-width: 80%; height: auto; max.5); border-radius: 10px; font-size: 4vmin; }
        #positioningOverlay .modal-button { background-color: #4CAF50; width: 60vw; max--height: 40vh; border-radius: 10px; margin-bottom: 20px; border: 3px solid #FFD700;}
        #openGameSettingsButton { background-color:width: 250px; }
        .promo-image { max-width: 80%; height #2196F3; } /* Game Settings button ke liye alag style */

    </style>
</: auto; max-height: 40vh; border-radius: 10px; margin-bottom: head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        20px; border: 3px solid #FFD700;}
    </style>
</head><div id="gameObjectContainer"><img id="playerCarElement" class="game-object hidden"></div>
        <div
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
         id="popupContainer"></div>
        <div id="leftButton" class="control-btn hidden"></div>
        <div<div id="gameObjectContainer"><img id="playerCarElement" class="game-object hidden"></div>
        <div id="rightButton" class="control-btn hidden"></div>
        <div id="startScreen">
             id="popupContainer"></div>
        <div id="leftButton" class="control-btn hidden"></div>
        <div<div id="coinDisplay" class="hidden"> <img src="coin.gif" alt="Coin"> <span id="rightButton" class="control-btn hidden"></div>
        <div id="startScreen">
             id="totalCoinsDisplay">0</span> </div>
            <h1>Car Racing</h1>
            <div id="difficultySelector<div id="coinDisplay" class="hidden"> <img src="coin.gif" alt="Coin"> <span">
                <button id="easyButton" class="difficulty-btn"></button>
                <button id="mediumButton" class="difficulty-btn"></button>
                <button id="hardButton" class="difficulty- id="totalCoinsDisplay">0</span> </div>
            <h1>Car Racing</h1>
            <div id="difficultySelectorbtn"></button>
            </div>
            <button id="rewardButton"> <img src="coin.gif">">
                <button id="easyButton" class="difficulty-btn"></button>
                <button id=" <span>Visit Site for 150 Coins</span> </button>
            <div id="settingsButton"></div>mediumButton" class="difficulty-btn"></button>
                <button id="hardButton" class="difficulty-
        </div>

        <!-- YEH AB MAIN SETTINGS MENU HAI -->
        <div id="intermediateSettingsModal" class="btn"></button>
            </div>
            <button id="rewardButton"> <img src="coin.gif">modal hidden">
            <div class="modal-content">
                <button id="closeIntermediateModalButton" class=" <span>Visit Site for 150 Coins</span> </button>
            <div id="settingsButton"></div>
        </div>

        <!-- NAYA UNIVERSAL MENU (MODAL) -->
        <div id="intermediateSettingsModal" classmodal-close-btn"></button>
                <h2>Our Cars</h2>
                <img src="https://via.="modal hidden">
            <div class="modal-content">
                <button id="closeIntermediateModalButton"placeholder.com/400x200.png?text=Your+Awesome+Car+Image" alt="Promo Image" class="promo-image">
                <button id="openShopButton" class="modal-button" class="modal-close-btn"></button>
                <h2>Our Cars & Settings</h2>
                <img src="https style="background-color: #FFC107; color: black;">Select our new cars</button>
                ://via.placeholder.com/400x200.png?text=Your+Awesome+Car<!-- GAME SETTINGS BUTTON YAHAN AA GAYA HAI -->
                <button id="openGameSettingsButton" class="+Image" alt="Promo Image" class="promo-image">
                <button id="openShopButton" class="modal-button" style="background-color: #FFC107; color: black;">Select our newmodal-button">Game Settings</button>
            </div>
        </div>
        
        <!-- YEH CAR SELECTION cars</button>
                <hr style="width: 80%; border-color: #555; SCREEN HAI -->
        <div id="shopModal" class="modal hidden"> 
            <div class="modal- margin-top: 10px;">
                <h3 style="margin-top: 10px; fontcontent">
                <button id="closeShopButton" class="modal-close-btn"></button>
                -size: 5vw;">Game Settings</h3>
                <div class="settings-option">
                    <label<h2>Choose Your Car</h2> 
                <div id="carSelection"></div> 
                <!-- GAME SETTINGS BUTTON Y for="opacitySlider">Controls Opacity</label>
                    <input type="range" id="opacitySlider" minAHAN SE HATA DIYA GAYA HAI -->
            </div> 
        </div>

        <div id="settingsModal"="0" max="100" value="40">
                </div>
                <div class="settings-option class="modal hidden">
             <div class="modal-content">
                 <button id="closeSettingsButton"">
                   <label for="sizeSlider">Controls Size</label>
                   <input type="range" id="sizeSlider class="modal-close-btn"></button>
                 <h2>Settings</h2>
                 <div class="settings-option">
" min="10" max="30" value="18">
               </div>
                <button id="position                     <label for="opacitySlider">Controls Opacity</label>
                     <input type="range" id="opacitySliderControlsButton" class="modal-button">Set Control Position</button>
            </div>
        </div>
        
        <!--" min="0" max="100" value="40">
                 </div>
                 <div class CAR SHOP MODAL (ab isme Game Settings button nahi hai) -->
        <div id="shopModal" class="settings-option">
                    <label for="sizeSlider">Controls Size</label>
                    <input type="range"="modal hidden">
             <div class="modal-content">
                 <button id="closeShopButton" id="sizeSlider" min="10" max="30" value="18">
                </div>
                 < class="modal-close-btn"></button>
                 <h2>Choose Your Car</h2>
                 <div id="carSelection"></div>button id="positionControlsButton" class="modal-button">Set Control Position</button>
             </div>
        </div>
        
             </div>
        </div>

        <div id="magnetTimer" class="hidden"><img src="magnet.png"><div id="magnetTimer" class="hidden"><img src="magnet.png"><span></span></div>
        <<span></span></div>
        <div id="bannerAdContainer"><span style="color: white;">Banner Ad Placeholder</span></div>
        div id="bannerAdContainer"><span style="color: white;">Banner Ad Placeholder</span></div>
        <div id="custom<div id="customAlertModal" class="hidden"> <div class="custom-alert-box"> <img idAlertModal" class="hidden"> <div class="custom-alert-box"> <img id="alertLogo" src="logo.png" alt="Game Logo"> <h2 id="alertTitle"></h2> <p id="alert="alertLogo" src="logo.png" alt="Game Logo"> <h2 id="alertTitle"></h2>Message"></p> <div class="custom-alert-buttons"> <button id="alertConfirmBtn" class="hidden"> <p id="alertMessage"></p> <div class="custom-alert-buttons"> <button id="alertConfirmBtn"Proceed</button> <button id="alertCancelBtn" class="hidden">Cancel</button> <button id=" class="hidden">Proceed</button> <button id="alertCancelBtn" class="hidden">Cancel</button>alertOkBtn" class="hidden">OK</button> </div> </div> </div>
        <div id="gameOverModal" <button id="alertOkBtn" class="hidden">OK</button> </div> </div> </div>
        <div id class="hidden">
            <h1 id="gameOverTitle">Game Over</h1>
            <p id="finalScore">="gameOverModal" class="hidden">
            <h1 id="gameOverTitle">Game Over</h1>
            <pYour Score: 0</p>
            <div id="gameOverButtons">
                <button id="continueBtn" class="game-over-btn"> <img src="coin.gif"> <span>Continue (100) id="finalScore">Your Score: 0</p>
            <div id="gameOverButtons">
                </span> </button>
                <button id="retryBtn" class="game-over-btn"> <span>Retry<button id="continueBtn" class="game-over-btn"> <img src="coin.gif"> <span>Continue (100)</span> </button>
                <button id="retryBtn" class="game-over-btn</span> </button>
                <button id="gameOverBackBtn"></button>
            </div>
        </div>
        <div"> <span>Retry</span> </button>
                <button id="gameOverBackBtn"></button>
            </div>
        </div> id="positioningOverlay" class="hidden">
            <div class="positioning-text">
                <h2>
        <div id="positioningOverlay" class="hidden">
            <div class="positioning-textSet Button Positions</h2>
                <p>Drag buttons to set their position.</p>
            </div>
            <">
                <h2>Set Button Positions</h2>
                <p>Drag buttons to set their position.</p>
            </div>
            <button id="savePositionsButton" class="modal-button">Save Positions</button>
        button id="savePositionsButton" class="modal-button">Save Positions</button>
        </div>
    </div>

    <</div>
    </div>

    <script>
        const VOICE_CONFIG = { enabled: true, lang: 'enscript>
        const VOICE_CONFIG = { enabled: true, lang: 'en-US', rate: 1.-US', rate: 1.0, pitch: 1.0, welcome: "Welcome to Car Racing.0, pitch: 1.0, welcome: "Welcome to Car Racing. Choose a difficulty level.", gameStart: "Let's go!", magnetPickup: "Magnet activated!", gameOver: "Game Over. Your final score is" }; Choose a difficulty level.", gameStart: "Let's go!", magnetPickup: "Magnet activated!", gameOver: "Game Over. Your final score is" };
        const ADS_CONFIG = { rewardAmount: 150, direct
        const ADS_CONFIG = { rewardAmount: 150, directLink: "https://otieu.com/4/7576356" };
        const CONFIG = { continueCost: Link: "https://otieu.com/4/7576356" };
        const CONFIG = { continueCost: 100, immunityDuration: 180, playerCarWidthPercent: 0100, immunityDuration: 180, playerCarWidthPercent: 0.11, player.11, playerSpeedMultiplier: 0.0216, roadSpeedMultiplier: 0.00SpeedMultiplier: 0.0216, roadSpeedMultiplier: 0.006, difficulty: {6, difficulty: { easy: 1.0, medium: 1.1, hard: 1. easy: 1.0, medium: 1.1, hard: 1.21 }, obstacleWidth21 }, obstacleWidthFactor: 0.75, obstacleSpawnInterval: 120, coinSizeFactor: 0.75, obstacleSpawnInterval: 120, coinSizePercent: 0.15, coinSpawnInterval: 180, magnetSizePercent: 0.1, magnetSpawnInterval: 6Percent: 0.15, coinSpawnInterval: 180, magnetSizePercent: 0.1,00, magnetDuration: 360 };
        const cars = [ { name: 'Default Racer', src: 'player_car.png', price: 0, unlocked: true }, { name: 'Blue Thunder', src: 'player_car_2.png', price: 50, unlocked: false }, { name: 'Red Fury', src: 'player_car_3.png', price: 100, unlocked: false }, { name: 'Green Ghost', src: 'player_car_4.png', price: 250, unlocked: false }, { name: 'Yellow Jacket', src: 'player_car_5.png', price: 500, unlocked: false } ];
        
        const canvas = document.getElementById('gameCanvas'), ctx = canvas.getContext('2d'); const gameContainer = document.getElementById('gameContainer'); const startScreen = document. magnetSpawnInterval: 600, magnetDuration: 360 };
        const cars = [ { name: 'Default Racer', src: 'player_car.png', price: 0, unlocked: true }, { name: 'Blue Thunder', src: 'player_car_2.png', price: 50, unlocked: false }, { name: 'Red Fury', src: 'player_car_3.png', price: 100, unlocked: false }, { name: 'Green Ghost', src: 'player_car_4.png', price: 250, unlocked: false }, { name: 'Yellow Jacket', src: 'player_car_5.png', price: 500, unlocked: false } ];
        
        const canvas = document.getElementById('gameCanvas'), ctx = canvas.getContext('2d'); const gameContainer = document.getElementById('gameContainer'); const startScreen = document.getElementById('startScreen'), coinDisplay = document.getElementById('coinDisplay'), totalCoinsDisplay = documentgetElementById('startScreen'), coinDisplay = document.getElementById('coinDisplay'), totalCoinsDisplay = document.getElementById('totalCoinsDisplay'), rewardButton = document.getElementById('rewardButton'); const shopModal = document.getElementById('shopModal'), close.getElementById('totalCoinsDisplay'), rewardButton = document.getElementById('rewardButton'); const shopModal = document.getElementById('shopModalShopButton = document.getElementById('closeShopButton'); const settingsButton = document.getElementById('settingsButton'); const settings'), closeShopButton = document.getElementById('closeShopButton'); const settingsButton = document.getElementById('settingsButton'); const magnetModal = document.getElementById('settingsModal'); const magnetTimerDiv = document.getElementById('magnetTimer'); const leftButton =TimerDiv = document.getElementById('magnetTimer'); const leftButton = document.getElementById('leftButton'), rightButton = document.getElementById('rightButton'); const gameOverModal = document.getElementById('gameOverModal'), finalScoreDisplay = document.getElementById('final document.getElementById('leftButton'), rightButton = document.getElementById('rightButton'); const gameOverModal = document.getElementById('gameOverModalScore'), continueBtn = document.getElementById('continueBtn'), retryBtn = document.getElementById('retryBtn'), gameOverBackBtn = document'), finalScoreDisplay = document.getElementById('finalScore'), continueBtn = document.getElementById('continueBtn'), retryBtn = document.getElementById('retryBtn'), gameOverBackBtn = document.getElementById('gameOverBackBtn'); const customAlertModal = document.getElementById('.getElementById('gameOverBackBtn'); const customAlertModal = document.getElementById('customAlertModal'); const alertTitle = document.getElementById('alertTitle'); const alertMessage = document.getElementById('alertMessage'); const alertConfirmBtn = document.getElementById('customAlertModal'); const alertTitle = document.getElementById('alertTitle'); const alertMessage = document.getElementById('alertMessage'); constalertConfirmBtn'); const alertCancelBtn = document.getElementById('alertCancelBtn'); const alertOkBtn = document. alertConfirmBtn = document.getElementById('alertConfirmBtn'); const alertCancelBtn = document.getElementById('alertCancelBtngetElementById('alertOkBtn'); const sizeSlider = document.getElementById('sizeSlider'); const savePositionsButton = document.getElementById('savePositionsButton');
        const intermediateSettingsModal = document.getElementById('intermediateSettingsModal');
        const openShopButton = document'); const alertOkBtn = document.getElementById('alertOkBtn'); const sizeSlider = document.getElementById('sizeSlider'); const.getElementById('openShopButton');
        const closeIntermediateModalButton = document.getElementById('closeIntermediateModalButton'); savePositionsButton = document.getElementById('savePositionsButton');
        
        const intermediateSettingsModal = document.getElementById('intermediateSettingsModal');
        const openShopButton = document.getElementById('openShopButton');
        const closeIntermediateModalButton = document.getElementById('closeIntermediateModalButton');
        const openGameSettingsButton = document.getElementById('openGameSettingsButton'); // NAYA BUTTON

        let gameState = 'menu', score = 0, difficultyMultiplier = 1.0, totalCoins = 0; let selectedCarSrc = 'player_car.png'; let assets

        let gameState = 'menu', score = 0, difficultyMultiplier = 1.0, totalCoins = 0; let selectedCarSrc = 'player_car.png'; let assets = { road: new Image(), hitSound: new Audio(), carSound: new Audio(), collectSound: new Audio(), openingSound: new Audio() }; const = { road: new Image(), hitSound: new Audio(), carSound: new Audio(), collectSound: new Audio playerCar = { element: document.getElementById('playerCarElement'), x: 0, y: 0, magnet(), openingSound: new Audio() }; const playerCar = { element: document.getElementById('playerCarElement'), xActive: false, magnetTimer: 0, isImmune: false, immunityTimer: 0 }; let road: 0, y: 0, magnetActive: false, magnetTimer: 0, isImmune: false = {}, coins = [], obstacles = [], magnets = []; let coinSpawnTimer = 0, obstacleSpawnTimer = 0, immunityTimer: 0 }; let road = {}, coins = [], obstacles = [], magnets = []; let coinSpawnTimer = 0, obstacleSpawnTimer = 0, magnetSpawnTimer = 0; let D_DIMS = {};, magnetSpawnTimer = 0; let D_DIMS = {}; let rewardInProgress = false; let timerComplete = false; let usedContinue = false;
        let isPositioningControls = false;

        function speak(text) { if let rewardInProgress = false; let timerComplete = false; let usedContinue = false;
        let isPositioningControls (!VOICE_CONFIG.enabled || !('speechSynthesis' in window)) return; const utterance = new SpeechSynthesisUt = false;

        function speak(text) { if (!VOICE_CONFIG.enabled || !('speechSynthesis'terance(text); utterance.lang = VOICE_CONFIG.lang; utterance.rate = VOICE_CONFIG.rate in window)) return; const utterance = new SpeechSynthesisUtterance(text); utterance.lang = VOICE_CONFIG.lang; utterance.rate = VOICE_CONFIG.rate; utterance.pitch = VOICE_CONFIG.pitch; window.speechSynthesis.; utterance.pitch = VOICE_CONFIG.pitch; window.speechSynthesis.speak(utterance); }
        
        function handleGameOver() {
            gameState = 'gameOver';
            assets.carSound.pause();
            assets.hitspeak(utterance); }
        
        function handleGameOver() { gameState = 'gameOver'; assets.carSound.pauseSound.currentTime = 0;
            assets.hitSound.play();
            leftButton.classList.add('hidden');
            rightButton.classList.add('hidden');
            finalScoreDisplay.innerText = `Your Score: ${(); assets.hitSound.currentTime = 0; assets.hitSound.play(); leftButton.classList.add('hidden'); rightButton.classList.add('hidden'); finalScoreDisplay.innerText = `Your Score: ${score}`;score}`;
            continueBtn.disabled = !(totalCoins >= CONFIG.continueCost && !usedContinue);
            gameOver continueBtn.disabled = !(totalCoins >= CONFIG.continueCost && !usedContinue); gameOverModal.classList.remove('hiddenModal.classList.remove('hidden');
            speak(`${VOICE_CONFIG.gameOver} ${score}`);
        }

        function continueGame() { if (totalCoins >= CONFIG.continueCost && !usedContinue) { totalCoins -= CONFIG.continueCost'); speak(`${VOICE_CONFIG.gameOver} ${score}`); }
        function continueGame() { if (totalCoins >= CONFIG.continueCost && !usedContinue) { totalCoins -= CONFIG.continueCost; usedContinue = true; updateCoin; usedContinue = true; updateCoinDisplay(); saveGameData(); playerCar.isImmune = true; playerCar.immunityTimer = CONFIG.immunityDuration; obstacles = obstacles.filter(obs => obs.y < playerCarDisplay(); saveGameData(); playerCar.isImmune = true; playerCar.immunityTimer = CONFIG.immunity.y - 50 || obs.y > playerCar.y + D_DIMS.playerCarHeightDuration; obstacles = obstacles.filter(obs => obs.y < playerCar.y - 50 || obs.y >); document.querySelectorAll('.obstacle-car').forEach(el => { const elTop = parseFloat(el.style.top); if (elTop > playerCar.y - 50 && elTop < playerCar.y + D_D playerCar.y + D_DIMS.playerCarHeight); document.querySelectorAll('.obstacle-car').forEach(elIMS.playerCarHeight) { el.remove(); } }); gameOverModal.classList.add('hidden'); gameState = 'playing => { const elTop = parseFloat(el.style.top); if (elTop > playerCar.y - 50'; assets.carSound.play(); } }
        function retryGame() { gameOverModal.classList.add('hidden'); && elTop < playerCar.y + D_DIMS.playerCarHeight) { el.remove(); } }); showStartScreen(); }
        
        function init() {
            loadGameData();
            loadSettings(); gameOverModal.classList.add('hidden'); gameState = 'playing'; assets.carSound.play(); } }
        function retryGame() { gameOverModal.classList.add('hidden'); showStartScreen(); }
        
        function init() {

            rewardButton.addEventListener('click', startRewardedTask);
            continueBtn.addEventListener('click', continueGame);
            retryBtn.addEventListener('click', retryGame);
            gameOverBackBtn.addEventListener('click', retryGame);
            loadGameData();
            loadSettings();
            rewardButton.addEventListener('click', startRewardedTask);
            continue            document.getElementById('easyButton').addEventListener('click', () => startGame(CONFIG.difficulty.easy));
            document.getElementById('mediumButton').addEventListener('click', () => startGame(CONFIG.difficulty.medium));
            document.getElementByIdBtn.addEventListener('click', continueGame);
            retryBtn.addEventListener('click', retryGame);
            gameOverBackBtn.addEventListener('click', retryGame);
            document.getElementById('easyButton').addEventListener('click', () => startGame(CONFIG.difficulty.easy));
            document.getElementById('mediumButton').addEventListener('click', () => startGame(CONFIG.difficulty.medium('hardButton').addEventListener('click', () => startGame(CONFIG.difficulty.hard));
            const handleTouchStart = (e) => e.preventDefault();
            ['mousedown', 'touchstart'].forEach(evt => { leftButton.addEventListener());
            document.getElementById('hardButton').addEventListener('click', () => startGame(CONFIG.difficulty.hard));evt, (e) => { handleTouchStart(e); isMovingLeft = true; }); rightButton.addEventListener(
            const handleTouchStart = (e) => e.preventDefault();
            ['mousedown', 'touchstart'].forEach(evt => { leftButton.addEventListener(evt, (e) => { handleTouchStart(e); isMovingLeft = true;evt, (e) => { handleTouchStart(e); isMovingRight = true; }); });
            ['mouseup', 'mouseleave', 'touchend'].forEach(evt => { leftButton.addEventListener(evt, () => isMovingLeft = false); rightButton.addEventListener(evt, () => isMovingRight = false); });
            
            showStartScreen(); }); rightButton.addEventListener(evt, (e) => { handleTouchStart(e); isMovingRight = true; }); });
            ['mouseup', 'mouseleave', 'touchend'].forEach(evt => { leftButton.addEventListener(evt, ()
            requestAnimationFrame(gameLoop);

            settingsButton.addEventListener('click', () => { 
                startScreen.classList.add('hidden'); 
                intermediateSettingsModal.classList.remove('hidden');
            });

 => isMovingLeft = false); rightButton.addEventListener(evt, () => isMovingRight = false); });
            
                        closeIntermediateModalButton.addEventListener('click', () => {
                intermediateSettingsModal.classList.add('hidden');
showStartScreen();
            requestAnimationFrame(gameLoop);

            // === MENU NAVIGATION LOGIC KO UPDATE KIYA GAYA ===
            settingsButton.addEventListener('click', () => { 
                startScreen.classList.add('hidden');                startScreen.classList.remove('hidden');
            });

            openShopButton.addEventListener('click', () => {
                intermediateSettingsModal.classList.add('hidden');
                populateCarShop();
                shopModal.classList 
                intermediateSettingsModal.classList.remove('hidden');
            });
            closeIntermediateModalButton.addEventListener('click', () => {
                intermediateSettingsModal.classList.add('hidden');
                startScreen.classList.remove('hidden');
            });
            openShopButton.addEventListener('click', () => {
                intermediateSettingsModal.classList.add('hidden');
                populateCarShop();
                shopModal.classList.remove('hidden');
            });.remove('hidden');
            });

            closeShopButton.addEventListener('click', () => { 
                shopModal.classList.add('hidden'); 
                intermediateSettingsModal.classList.remove('hidden'); // Car shop se wapas Universal Menu par jao
            });

            const opacitySlider = document.getElementById('opacitySlider');
            
            openGameSettingsButton.addEventListener('click', () => {
                intermediateSettingsModal.classList.add('hidden');
opacitySlider.addEventListener('input', (e) => { const opacity = e.target.value / 100; leftButton.style.backgroundColor = `rgba(0, 0, 0, ${opacity})`; rightButton.style.                settingsModal.classList.remove('hidden');
            });
            closeShopButton.addEventListener('click', () => { 
                shopModal.classList.add('hidden'); 
                intermediateSettingsModal.classList.remove('hidden'); // Wapas intermediate menu par jao
            });
            document.getElementById('closeSettingsButton').addEventListener('click', ()backgroundColor = `rgba(0, 0, 0, ${opacity})`; localStorage.setItem('controlOpacity', e.target. => { 
                settingsModal.classList.add('hidden'); 
                intermediateSettingsModal.classList.removevalue); });
            sizeSlider.addEventListener('input', (e) => { const newSize = e.target.value;('hidden'); // Wapas intermediate menu par jao
            });
            // ===============================================

            const opacity leftButton.style.width = `${newSize}vmin`; leftButton.style.height = `${newSize}vmin`; rightButton.style.width = `${newSize}vmin`; rightButton.style.height = `${newSize}vmin`; localStorage.setItem('controlSize', newSize); });
            document.getElementById('positionControlsButton').addEventListener('click', enterPositioningMode);
            savePositionsButton.addEventListener('click', exitPositioningMode);
            windowSlider = document.getElementById('opacitySlider');
            opacitySlider.addEventListener('input', (e) => { const opacity.addEventListener('resize', showStartScreen);
        }

        function update() { if (gameState !== 'playing = e.target.value / 100; leftButton.style.backgroundColor = `rgba(0,' || isPositioningControls) return; if (playerCar.isImmune) { playerCar.immunityTimer--; playerCar.element.style.opacity = (playerCar.immunityTimer % 20 < 10) 0, 0, ${opacity})`; rightButton.style.backgroundColor = `rgba(0, 0, 0, ${opacity})`; localStorage.setItem('controlOpacity', e.target.value); });
            sizeSlider.addEventListener('input', (e) => { const newSize = e.target.value; leftButton.style.width = `${newSize}vmin`; leftButton.style.height = `${newSize}vmin`; rightButton.style.width = `${newSize}vmin`; rightButton.style.height = `${newSize}vmin`; localStorage.setItem('controlSize', new ? '0.5' : '1'; if (playerCar.immunityTimer <= 0) { playerCar.isImmune = false; playerCar.element.style.opacity = '1'; } } updateAndCheckObjectsSize); });
            document.getElementById('positionControlsButton').addEventListener('click', enterPositioningMode);
            savePositionsButton.addEventListener('click', exitPositioningMode);
            window.addEventListener('resize', showStartScreen);(obstacles, (obstacle) => { if (checkCollision(playerCar, obstacle) && !playerCar.isImm
        }

        function update() { if (gameState !== 'playing' || isPositioningControls) return; ifune) { handleGameOver(); } }); road.y1 += D_DIMS.baseSpeed; road.y2 += (playerCar.isImmune) { playerCar.immunityTimer--; playerCar.element.style.opacity = ( D_DIMS.baseSpeed; if (road.y1 >= canvas.height) road.y1 = road.y2 - canvas.height; if (road.y2 >= canvas.height) road.y2 = road.y1playerCar.immunityTimer % 20 < 10) ? '0.5' : '1'; if (playerCar.immunityTimer <= 0) { playerCar.isImmune = false; playerCar.element. - canvas.height; if (playerCar.magnetActive) { playerCar.magnetTimer--; magnetTimerDiv.querySelector('span').innerText = `${Math.ceil(playerCar.magnetTimer / 60)}s`; if (style.opacity = '1'; } } updateAndCheckObjects(obstacles, (obstacle) => { if (checkplayerCar.magnetTimer <= 0) { playerCar.magnetActive = false; magnetTimerDiv.classList.add('Collision(playerCar, obstacle) && !playerCar.isImmune) { handleGameOver(); } }); road.y1 += D_DIMS.baseSpeed; road.y2 += D_DIMS.baseSpeed; if (road.hidden'); } } if (isMovingLeft) playerCar.x -= D_DIMS.playerCarSpeed; if (y1 >= canvas.height) road.y1 = road.y2 - canvas.height; if (road.isMovingRight) playerCar.x += D_DIMS.playerCarSpeed; playerCar.x = Math.max(D_DIMS.roadLeftBoundary, Math.min(playerCar.x, D_DIMS.roadRighty2 >= canvas.height) road.y2 = road.y1 - canvas.height; if (playerCar.magnetActive) { playerCar.magnetTimer--; magnetTimerDiv.querySelector('span').innerText = `${Math.ceil(playerBoundary - D_DIMS.playerCarWidth)); playerCar.element.style.left = `${playerCar.Car.magnetTimer / 60)}s`; if (playerCar.magnetTimer <= 0) { playerCar.magnetActive = false; magnetTimerDiv.classList.add('hidden'); } } if (isMovingLeft) playerx}px`; if (++obstacleSpawnTimer > CONFIG.obstacleSpawnInterval) { obstacles.push(createGameObject('obstacle-car', `obstacle${Math.floor(Math.random() * 4) + 1}.png`,Car.x -= D_DIMS.playerCarSpeed; if (isMovingRight) playerCar.x += D_DIMS.playerCarSpeed; playerCar.x = Math.max(D_DIMS.roadLeftBoundary D_DIMS.obstacleWidth, D_DIMS.obstacleHeight, D_DIMS.baseSpeed +, Math.min(playerCar.x, D_DIMS.roadRightBoundary - D_DIMS. Math.random() * 2)); obstacleSpawnTimer = 0; } if (++coinSpawnTimer > CONFIG.coinSpawnInterval) { coins.push(createGameObject('coin', 'coin.gif', D_DIMS.coinSize,playerCarWidth)); playerCar.element.style.left = `${playerCar.x}px`; if (++obstacle D_DIMS.coinSize, D_DIMS.baseSpeed)); coinSpawnTimer = 0; } if (++magnetSpawnTimer > CONFIG.magnetSpawnInterval) { magnets.push(createGameObject('magnet-powerup', 'magnet.png', D_DIMS.magnetSize, D_DIMS.magnetSize, D_DIMS.baseSpawnTimer > CONFIG.obstacleSpawnInterval) { obstacles.push(createGameObject('obstacle-car', `obstacle${Speed)); magnetSpawnTimer = 0; } updateAndCheckObjects(coins); updateAndCheckObjects(magnets, (magnetMath.floor(Math.random() * 4) + 1}.png`, D_DIMS.obstacleWidth, D_DIMS.obstacleHeight, D_DIMS.baseSpeed + Math.random() * 2));) => { if (checkCollision(playerCar, magnet)) { if (!playerCar.magnetActive) speak(VOICE_CONFIG.magnetPickup); playerCar.magnetActive = true; playerCar.magnetTimer = CONFIG.magnetDuration; magnetTimerDiv.classList.remove('hidden'); return true; } }); }
        function resetGame() { usedContinue = false; obstacleSpawnTimer = 0; } if (++coinSpawnTimer > CONFIG.coinSpawnInterval) { coins.push(createGameObject('coin', 'coin.gif', D_DIMS.coinSize, D_DIMS.coinSize score = 0; document.getElementById('popupContainer').innerHTML = ''; document.getElementById('gameObjectContainer').innerHTML =, D_DIMS.baseSpeed)); coinSpawnTimer = 0; } if (++magnetSpawnTimer > CONFIG ''; playerCar.element = document.createElement('img'); playerCar.element.id = 'playerCarElement'; playerCar.element.className = 'game-object'; playerCar.element.src = selectedCarSrc; playerCar.element.magnetSpawnInterval) { magnets.push(createGameObject('magnet-powerup', 'magnet.png', D_DIMS.magnetSize, D_DIMS.magnetSize, D_DIMS.baseSpeed)); magnetSpawnTimer = .style.width = `${D_DIMS.playerCarWidth}px`; playerCar.element.style.height = `${D_DIMS.playerCarHeight}px`; document.getElementById('gameObjectContainer').appendChild(playerCar.element);0; } updateAndCheckObjects(coins); updateAndCheckObjects(magnets, (magnet) => { if playerCar.y = canvas.height - D_DIMS.playerCarHeight - (canvas.height * 0.1 (checkCollision(playerCar, magnet)) { if (!playerCar.magnetActive) speak(VOICE_CONFIG.); playerCar.x = (canvas.width / 2) - (D_DIMS.playerCarWidth / 2); playerCar.element.style.left = `${playerCar.x}px`; playerCar.elementmagnetPickup); playerCar.magnetActive = true; playerCar.magnetTimer = CONFIG.magnetDuration; magnetTimerDiv.classList.style.top = `${playerCar.y}px`; obstacles = []; coins = []; magnets = []; playerCar.magnetActive = false; magnetTimerDiv.classList.add('hidden'); road = { y1: 0, y2: -canvas.remove('hidden'); return true; } }); }
        function resetGame() { usedContinue = false; score = 0; document.getElementById('popupContainer').innerHTML = ''; document.getElementById('gameObjectContainer').innerHTML = ''; playerCar.element = document.createElement('img'); playerCar.element.id = 'playerCarElement'; playerCar.element.className.height }; }
        
        function draw() {
            if (isPositioningControls) { ctx.clearRect = 'game-object'; playerCar.element.src = selectedCarSrc; playerCar.element.style.width = `${D_DIMS.playerCarWidth}px`; playerCar.element.style.height = `${D_DIMS.playerCarHeight}px`; document.getElementById('gameObjectContainer').appendChild(playerCar.element); playerCar.y(0, 0, canvas.width, canvas.height); ctx.fillStyle = 'rgba(0,0,0,0.8)'; ctx.fillRect(0,0, canvas.width, canvas.height); return; }
            ctx = canvas.height - D_DIMS.playerCarHeight - (canvas.height * 0.1); player.clearRect(0, 0, canvas.width, canvas.height); ctx.drawImage(assets.road, 0, road.y1, canvas.width, canvas.height); ctx.drawImage(assets.road,Car.x = (canvas.width / 2) - (D_DIMS.playerCarWidth / 2); playerCar.element.style.left = `${playerCar.x}px`; playerCar.element.style.top 0, road.y2, canvas.width, canvas.height); if (gameState === 'playing' || gameState === ' = `${playerCar.y}px`; obstacles = []; coins = []; magnets = []; playerCar.magnetActive = false; magnetgameOver') { draw3DScoreBox(score); } }
        
        function showCustomAlert(config) { alertTimerDiv.classList.add('hidden'); road = { y1: 0, y2: -canvas.height }; }
        
        function draw() {
            if (isPositioningControls) { ctx.clearRect(0,Title.innerText = config.title; alertMessage.innerHTML = config.message; alertConfirmBtn.classList.add('hidden'); alertCancelBtn.classList.add('hidden'); alertOkBtn.classList.add('hidden'); if (config 0, canvas.width, canvas.height); ctx.fillStyle = 'rgba(0,0,0,0.8)'; ctx.fillRect(0,0, canvas.width, canvas.height); return; }
            .type === 'confirm') { alertConfirmBtn.classList.remove('hidden'); alertCancelBtn.classList.remove('hidden'); alertConfirmBtn.onclick = () => { customAlertModal.classList.add('hidden'); if (config.onctx.clearRect(0, 0, canvas.width, canvas.height); ctx.drawImage(assets.road,Confirm) config.onConfirm(); }; alertCancelBtn.onclick = () => { customAlertModal.classList.add 0, road.y1, canvas.width, canvas.height); ctx.drawImage(assets.road, 0, road.y2, canvas.width, canvas.height); if (gameState === 'playing' || gameState('hidden'); }; } else { alertOkBtn.classList.remove('hidden'); alertOkBtn.onclick = () => { customAlertModal.classList.add('hidden'); }; } customAlertModal.classList.remove('hidden'); }
         === 'gameOver') { draw3DScoreBox(score); } }
        
        function showCustomAlert(function startRewardedTask() { if (rewardInProgress) return; showCustomAlert({ title: "Claim Your Free Rewardconfig) { alertTitle.innerText = config.title; alertMessage.innerHTML = config.message; alertConfirmBtn.classList!", message: "You will be taken to a <strong>Partner Site</strong>. Please stay there for at least <strong>5 seconds</strong> and then return to this tab to claim your reward.", type: 'confirm', onConfirm: () => { window.add('hidden'); alertCancelBtn.classList.add('hidden'); alertOkBtn.classList.add('hidden'); if (config.type === 'confirm') { alertConfirmBtn.classList.remove('hidden'); alertCancelBtn.classList.remove('hidden'); alertConfirmBtn.onclick = () => { customAlertModal.classList.add('hidden'); if (config.onConfirm) config.onConfirm(); }; alertCancelBtn.onclick = () => { customAlertModal.open(ADS_CONFIG.directLink, '_blank'); rewardInProgress = true; timerComplete = false; setTimeout(() => { timerComplete = true; }, 5000); } }); }
        function grantReward() { total.classList.add('hidden'); }; } else { alertOkBtn.classList.remove('hidden'); alertOkBtn.onclick = () => { customAlertModal.classList.add('hidden'); }; } customAlertModal.classList.remove('hiddenCoins += ADS_CONFIG.rewardAmount; updateCoinDisplay(); saveGameData(); showCustomAlert({ title: "Congratulations!", message: `You have received <strong>${ADS_CONFIG.rewardAmount}</strong> coins!`, type: 'info'); }
        function startRewardedTask() { if (rewardInProgress) return; showCustomAlert({ title: "Claim' }); }
        window.onfocus = function () { if (rewardInProgress) { if (timerComplete) { grantReward(); } else { showCustomAlert({ title: "Task Incomplete", message: "You returned too soon! Your Free Reward!", message: "You will be taken to a <strong>Partner Site</strong>. Please stay there for at least <strong>5 seconds</strong> and then return to this tab to claim your reward.", type: 'confirm', onConfirm: () => { window Please try again and wait for at least <strong>5 seconds</strong>.", type: 'info' }); } rewardInProgress = false;.open(ADS_CONFIG.directLink, '_blank'); rewardInProgress = true; timerComplete = false; setTimeout timerComplete = false; } };
        function loadAssets(callback) { const assetSources = { road: 'road.jpg', hitSound: 'carhit.mp3', carSound: 'carsound.mp3', collectSound: 'collect(() => { timerComplete = true; }, 5000); } }); }
        function grantReward() { totalCoins += ADS_CONFIG.rewardAmount; updateCoinDisplay(); saveGameData(); showCustomAlert({ title: "Congratulations.wav', openingSound: 'opening.wav' }; let loaded = 0; const total = Object.keys(assetSources).length; if (total === 0) { callback(); return; } const assetLoaded = () => { loaded++;!", message: `You have received <strong>${ADS_CONFIG.rewardAmount}</strong> coins!`, type: 'info' }); }
        window.onfocus = function () { if (rewardInProgress) { if (timerComplete) if (loaded === total) { callback(); } }; const assetFailed = (assetName, src) => { console.error(`Error: Asset '${assetName}' at path '${src}' could not be loaded.`); loaded++; if (loaded { grantReward(); } else { showCustomAlert({ title: "Task Incomplete", message: "You returned too soon! Please try again and wait for at least <strong>5 seconds</strong>.", type: 'info' }); } rewardInProgress = false; timerComplete = false; } };
        function loadAssets(callback) { const assetSources = { road: ' === total) { callback(); } }; for (let key in assetSources) { const src = assetSources[key]; if (key.includes('Sound')) { assets[key].src = src; assets[key].addEventListener('canplaythrough', () => assetLoaded(key)); assets[key].addEventListener('error', () => assetFailed(key, src));road.jpg', hitSound: 'carhit.mp3', carSound: 'carsound.mp3', collectSound: 'collect.wav', openingSound: 'opening.wav' }; let loaded = 0; const total = Object.keys(assetSources).length; if (total === 0) { callback(); return; } const assetLoaded = () } else { assets[key].src = src; assets[key].addEventListener('load', () => assetLoaded(key)); assets[key].addEventListener('error', () => assetFailed(key, src)); } } assets.carSound. => { loaded++; if (loaded === total) { callback(); } }; const assetFailed = (assetName, src) => {loop = true; }
        function saveGameData() { const unlockedCarSrcs = cars.filter(c => c.unlocked).map(c => c.src); const gameData = { totalCoins: totalCoins, unlocked console.error(`Error: Asset '${assetName}' at path '${src}' could not be loaded.`); loaded++; if (loaded === total) { callback(); } }; for (let key in assetSources) { const src = assetSources[key];Cars: unlockedCarSrcs }; localStorage.setItem('carGameData', JSON.stringify(gameData)); }
        function loadGameData() { const savedData = localStorage.getItem('carGameData'); if (savedData) { const gameData if (key.includes('Sound')) { assets[key].src = src; assets[key].addEventListener('canplaythrough', () => assetLoaded(key)); assets[key].addEventListener('error', () => assetFailed(key, src)); } else = JSON.parse(savedData); totalCoins = gameData.totalCoins || 0; const unlockedSrcs = gameData { assets[key].src = src; assets[key].addEventListener('load', () => assetLoaded(key)); assets[key].addEventListener('error', () => assetFailed(key, src)); } } assets.carSound.loop.unlockedCars || [cars[0].src]; cars.forEach(car => { if (unlockedSrcs.includes(car.src)) { car.unlocked = true; } }); } updateCoinDisplay(); }
        function = true; }
        function saveGameData() { const unlockedCarSrcs = cars.filter(c => c updateCoinDisplay() { totalCoinsDisplay.innerText = totalCoins; }
        function buyCar(carIndex) { const car = cars[carIndex]; if (totalCoins >= car.price) { totalCoins -= car.price; car.unlocked).map(c => c.src); const gameData = { totalCoins: totalCoins, unlockedCars: unlockedCarSrcs }; localStorage.setItem('carGameData', JSON.stringify(gameData)); }
.unlocked = true; updateCoinDisplay(); saveGameData(); populateCarShop(); } }
        function populateCarShop() { const container = document.getElementById('carSelection'); container.innerHTML = ''; cars.forEach((car, index) => { const carDiv = document.createElement('div'); carDiv.className = 'car-option'; if (car.un        function loadGameData() { const savedData = localStorage.getItem('carGameData'); if (savedData) { const gameData = JSON.parse(savedData); totalCoins = gameData.totalCoins || 0; const unlockedSrcs = gameData.unlockedCars || [cars[0].src]; cars.forEach(car => { if (locked) { if (car.src === selectedCarSrc) carDiv.classList.add('selected'); carDiv.innerHTML = `<img src="${car.src}" alt="${car.name}"><p>${car.name}</p>`; carunlockedSrcs.includes(car.src)) { car.unlocked = true; } }); } updateCoinDisplay(); }
        function updateCoinDisplay() { totalCoinsDisplay.innerText = totalCoins; }
        functionDiv.addEventListener('click', () => { selectedCarSrc = car.src; document.querySelectorAll('.car-option').forEach(opt => opt.classList.remove('selected')); carDiv.classList.add('selected'); shopModal.classList.add('hidden'); startGame(CONFIG.difficulty.medium); }); } else { carDiv.classList.add('locked'); carDiv.innerHTML = ` <img src="${car.src}" alt="${car.name}"> <p>${car buyCar(carIndex) { const car = cars[carIndex]; if (totalCoins >= car.price) { totalCoins -= car.price; car.unlocked = true; updateCoinDisplay(); saveGameData(); populateCarShop(); } }
        function populateCarShop() { const container = document.getElementById('carSelection'); container.innerHTML = ''; cars.name}</p> <div class="price-tag"> <img src="coin.gif"> <span>${car.price}</span> </div> <button class="buy-btn" id="buyBtn-${index}">Buy</button> `;.forEach((car, index) => { const carDiv = document.createElement('div'); carDiv.className = 'car-option'; if (car.unlocked) { if (car.src === selectedCarSrc) carDiv.classList. } container.appendChild(carDiv); if (!car.unlocked) { const buyButton = document.getElementById(`buyBtn-${index}`); if (totalCoins < car.price) { buyButton.disabled = true; } buyButton.add('selected'); carDiv.innerHTML = `<img src="${car.src}" alt="${car.name}"><p>${car.name}</p>`; carDiv.addEventListener('click', () => { selectedCarSrc = car.src; documentaddEventListener('click', () => buyCar(index)); } }); }
        function showStartScreen() { setDimensions(); resetGame(); gameState = 'menu'; playerCar.element.classList.add('hidden'); startScreen.classList..querySelectorAll('.car-option').forEach(opt => opt.classList.remove('selected')); carDiv.classList.add('selected'); shopModal.classList.add('hidden'); startGame(CONFIG.difficulty.medium); }); } else { carDiv.classList.remove('hidden'); coinDisplay.classList.remove('hidden'); shopModal.classList.add('hidden'); intermediateSettingsModal.classList.add('hidden'); leftButton.classList.add('hidden'); rightButton.classList.add('hidden'); assetsadd('locked'); carDiv.innerHTML = ` <img src="${car.src}" alt="${car.name}"> <p>${car.name}</p> <div class="price-tag"> <img src="coin.gif">.openingSound.currentTime = 0; assets.openingSound.play(); speak(VOICE_CONFIG.welcome); <span>${car.price}</span> </div> <button class="buy-btn" id="buyBtn-${index}">Buy</button> `; } container.appendChild(carDiv); if (!car.unlocked) { const buy }
        function updateAndCheckObjects(arr, onCollision) { for (let i = arr.length - 1; i >= 0; i--) { const obj = arr[i]; obj.y += obj.speed || D_DIMS.baseSpeed; if (obj.element.classList.contains('coin') && playerCar.magnetActiveButton = document.getElementById(`buyBtn-${index}`); if (totalCoins < car.price) { buyButton.disabled = true; } buyButton.addEventListener('click', () => buyCar(index)); } }); }
        function) { const dx = (playerCar.x + D_DIMS.playerCarWidth / 2) - showStartScreen() { setDimensions(); resetGame(); gameState = 'menu'; playerCar.element.classList.add('hidden'); startScreen.classList.remove('hidden'); coinDisplay.classList.remove('hidden'); shopModal.classList. (obj.x + obj.width / 2); const dy = (playerCar.y + D_DIMS.playerCarHeight / 2) - (obj.y + obj.height / 2); const distance = Math.sqrt(dx * dx + dy * dy); if (distance < canvas.width * 0.45) { objadd('hidden'); settingsModal.classList.add('hidden'); leftButton.classList.add('hidden'); rightButton.classList.add('hidden'); assets.openingSound.currentTime = 0; assets.openingSound.play(); speak(VOICE_.x += dx * 0.1; obj.y += dy * 0.1; } } obj.element.style.top = `${obj.y}px`; obj.element.style.left = `${obj.x}CONFIG.welcome); }
        function updateAndCheckObjects(arr, onCollision) { for (let i = arr.length - 1; i >= 0; i--) { const obj = arr[i]; obj.y +=px`; let removed = false; if (obj.element.classList.contains('coin')) { if (checkCollision(playerCar, obj)) { score += 1; totalCoins += 1; updateCoinDisplay(); saveGameData(); assets.collectSound.currentTime = 0; assets.collectSound.play(); createScorePopup(obj.x, obj.speed || D_DIMS.baseSpeed; if (obj.element.classList.contains('coin') obj.y); removed = true; } } else if (onCollision) { removed = onCollision(obj); } if (removed || obj.y > canvas.height) { obj.element.remove(); arr.splice(i, 1); } } }
        function setDimensions() { canvas.width = gameContainer.clientWidth; canvas.height && playerCar.magnetActive) { const dx = (playerCar.x + D_DIMS.playerCarWidth / 2) - (obj.x + obj.width / 2); const dy = (playerCar.y + D_DIMS.playerCarHeight / 2) - (obj.y + obj.height / 2); const = gameContainer.clientHeight; D_DIMS.roadLeftBoundary = canvas.width * 0.30; D_DIMS.roadRightBoundary = canvas.width * 0.70; D_DIMS.playerCarWidth = distance = Math.sqrt(dx * dx + dy * dy); if (distance < canvas.width * 0.45) { obj.x += dx * 0.1; obj.y += dy * 0.1; } } obj.element.style.top = `${obj.y}px`; obj.element.style.left = `${obj.x}px`; let removed = false; if (obj.element.classList.contains('coin')) { if (checkCollision(playerCar, obj)) { score += 1; totalCoins += 1; updateCoinDisplay(); save canvas.width * CONFIG.playerCarWidthPercent; D_DIMS.playerCarHeight = D_DIMS.playerCarWidth * 2; D_DIMS.playerCarSpeed = canvas.width * CONFIG.playerSpeedMultiplier * difficultyMultiplier; D_DIMS.baseSpeed = canvas.height * CONFIG.roadSpeedMultiplier * difficultyMultiplier; D_DIMS.obstacleWidth = D_DIMS.playerCarWidth * CONFIG.obstacleWidthFactor; D_DIMSGameData(); assets.collectSound.currentTime = 0; assets.collectSound.play(); createScorePopup(obj.x, obj.y); removed = true; } } else if (onCollision) { removed = onCollision(obj); } if (removed || obj.y > canvas.height) { obj.element.remove(); arr.splice(.obstacleHeight = D_DIMS.playerCarHeight * CONFIG.obstacleWidthFactor; D_DIMS.coinSize = canvas.width * CONFIG.coinSizePercent; D_DIMS.magnetSize = canvas.widthi, 1); } } }
        function setDimensions() { canvas.width = gameContainer.clientWidth; canvas.height = gameContainer.clientHeight; D_DIMS.roadLeftBoundary = canvas.width * 0.30; D_DIMS.roadRightBoundary = canvas.width * 0.70; D_DIMS.player * CONFIG.magnetSizePercent; }
        function startGame(difficulty) { difficultyMultiplier = difficulty; setDimensions(); assets.openingSound.pause(); startScreen.classList.add('hidden'); leftButton.classList.remove('hidden'); rightButton.classList.remove('hidden'); gameState = 'playing'; resetGame(); playerCar.element.classList.remove('hidden'); assets.carSound.currentTime = 0; assets.carSound.play(); speak(VOICE_CONFIG.gameStart); }
        function gameLoop() { update(); draw(); requestAnimationFrame(gameLoop); }
        function createGameObject(CarWidth = canvas.width * CONFIG.playerCarWidthPercent; D_DIMS.playerCarHeight = D_type, src, width, height, speed) { const element = document.createElement('img'); element.src = src; element.className = `game-object ${type}`; element.style.width = `${width}px`; element.style.height = `${height}px`; const randomX = Math.random() * (D_DIMS.roadRightBoundary - D_DIMS.roadLeftBoundary - width) + D_DIMS.roadLeftBoundary; element.style.left = `${randomX}px`; element.style.top = `-${height}px`; document.getElementById('gameObjectContainer').appendChild(element); return { element, x: randomX, y: -height,DIMS.playerCarWidth * 2; D_DIMS.playerCarSpeed = canvas.width * CONFIG width, height, speed }; }
        function checkCollision(obj1, obj2) { const rect1 = obj1.element.getBoundingClientRect(); const rect2 = obj2.element.getBoundingClientRect(); return !(rect1.right.playerSpeedMultiplier * difficultyMultiplier; D_DIMS.baseSpeed = canvas.height * CONFIG.roadSpeedMultiplier * difficultyMultiplier; D_DIMS.obstacleWidth = D_DIMS.playerCarWidth * CONFIG.obstacleWidthFactor; D_DIMS.obstacleHeight = D_DIMS.playerCarHeight * CONFIG.obstacleWidthFactor; D_DIMS.coinSize = canvas.width * CONFIG.coinSizePercent; D_DIMS.magnetSize = < rect2.left || rect1.left > rect2.right || rect1.bottom < rect2.top || rect1.top > rect2.bottom); }
        function createScorePopup(x, y) { const popup canvas.width * CONFIG.magnetSizePercent; }
        function startGame(difficulty) { difficultyMultiplier = difficulty; set = document.createElement('div'); popup.innerText = '+1'; popup.className = 'score-popup'; popup.style.cssText = `left:${x}px; top:${y}px; position:absolute; colorDimensions(); assets.openingSound.pause(); startScreen.classList.add('hidden'); leftButton.classList.remove('hidden'); rightButton.classList.remove('hidden'); gameState = 'playing'; resetGame(); playerCar.element.classList.remove('hidden'); assets.carSound.currentTime = 0; assets.carSound.play(); speak(VOICE_CONFIG.gameStart); }
        function gameLoop() { update(); draw(); requestAnimationFrame(gameLoop); }
        function createGameObject(:#FFD700; font-size:24px; font-weight:bold; text-shadow:1px 1px 2px black; animation:popup-animation 1s ease-out forwards;`;type, src, width, height, speed) { const element = document.createElement('img'); element.src = src document.getElementById('popupContainer').appendChild(popup); setTimeout(() => popup.remove(), 1000); }
        function draw3DScoreBox(score) { const boxWidth = 150, boxHeight = ; element.className = `game-object ${type}`; element.style.width = `${width}px`; element.style.height = `${height}px`; const randomX = Math.random() * (D_DIMS.roadRightBoundary - D_DIMS.roadLeftBoundary - width) + D_DIMS.roadLeftBoundary; element.style.left = `${randomX}px`; element.style.top = `-${height}px`; document.getElementById('gameObjectContainer').appendChild(element); return { element, x: randomX, y: -height, width, height, speed };50, x = 10, y = 10; ctx.fillStyle = 'rgba(0,0,0,0.7)'; ctx.fillRect(x, y, boxWidth, boxHeight); ctx.fillStyle = ' }
        function checkCollision(obj1, obj2) { const rect1 = obj1.element.getBoundingClientRect(); const rect2 = obj2.element.getBoundingClientRect(); return !(rect1.right < rect2.left || rect1.white'; ctx.font = 'bold 24px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('Score: ' + score, x + boxWidth / 2, y + boxHeight / 2); }
        function loadSettings() { 
            const savedOpacity = localStorage.getItem('controlOpacity') || '40'; 
            document.getElementById('opacitySlider').value = savedOpacity; 
            const opacityValue = savedOpacity / 100; 
            leftButton.style.backgroundColor = `rgba(0, 0, 0, ${opacityValue})`; 
            rightButton.style.backgroundColor = `rgba(0, 0, 0, ${opacityValue})`; 
            
            const savedSize = localStorage.getItem('controlSize') || '18';
            sizeSlider.value = savedSize;
            leftButton.style.width = `${savedSize}vmin`;
            leftButton.style.height = `${savedSize}vmin`;
            rightButtonleft > rect2.right || rect1.bottom < rect2.top || rect1.top > rect2.bottom.style.width = `${savedSize}vmin`;
            rightButton.style.height = `${savedSize}vmin`;

            const leftPos = JSON.parse(localStorage.getItem('leftButtonPos')); 
            const rightPos = JSON.); }
        function createScorePopup(x, y) { const popup = document.createElement('div'); popup.innerText = '+1'; popup.className = 'score-popup'; popup.style.cssText = `left:${x}px; top:${y}px; position:absolute; color:#FFD700; fontparse(localStorage.getItem('rightButtonPos')); 
            if (leftPos) { leftButton.style.top = leftPos.top; leftButton.style.left = leftPos.left; } 
            if (rightPos) { rightButton.style.top = rightPos.top; rightButton.style.left = rightPos.left;-size:24px; font-weight:bold; text-shadow:1px 1px 2px black; animation:popup-animation 1s ease-out forwards;`; document.getElementById('popupContainer').appendChild(popup); setTimeout(() => popup.remove(), 1000); }
        function draw3DScoreBox(score) { const boxWidth = 150, boxHeight = 50, x = 10, y = 10; ctx.fillStyle = 'rgba(0,0,0,0.7)'; ctx.fillRect(x, y, boxWidth, boxHeight); ctx.fillStyle = 'white'; ctx.font = 'bold 24px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('Score: ' + score, x + boxWidth / 2, y + boxHeight / 2); }
        function load } 
        }
        let isMovingLeft = false, isMovingRight = false; let dragTarget = null, offsetX, offsetY; 
        
        function enterPositioningMode() {
            isPositioningControls = true;
            const positioningOverlay = document.getElementById('positioningOverlay');
            intermediateSettingsModal.classList.addSettings() { 
            const savedOpacity = localStorage.getItem('controlOpacity') || '40'; 
            document.getElementById('opacitySlider').value = savedOpacity; 
            const opacityValue = savedOpacity / 100; 
            leftButton.style.backgroundColor = `rgba(0, 0, 0, ${opacityValue})`; 
            rightButton.style.backgroundColor = `rgba(0, 0, 0, ${opacityValue('hidden'); // Universal menu ko chupao
            positioningOverlay.classList.remove('hidden'); 
            })`; 
            
            const savedSize = localStorage.getItem('controlSize') || '18';
            sizeSlider.value = savedSize;
            leftButton.style.width = `${savedSize}vmin`;
            leftButton.style.height = `${savedSize}vmin`;
            rightButton.style.width = `${savedSize}vmin`;leftButton.classList.remove('hidden');
            rightButton.classList.remove('hidden');
            [leftButton, rightButton].forEach(btn => {
                btn.addEventListener('mousedown', startDrag);
                btn.addEventListener('touchstart', startDrag);
            });
        } 

        function exitPositioningMode() {
            isPositioningControls = false;
            const positioningOverlay = document.getElementById('positioningOverlay');
            positioningOverlay.classList
            rightButton.style.height = `${savedSize}vmin`;

            const leftPos = JSON.parse(localStorage.getItem('leftButtonPos')); 
            const rightPos = JSON.parse(localStorage.getItem('rightButtonPos')); 
            if (leftPos) { leftButton.style.top = leftPos.top; leftButton.style.left = leftPos.left; } 
            if (rightPos) { rightButton.style.top = rightPos.top; rightButton.style.left = rightPos.left; } 
        }
        let is.add('hidden'); 
            intermediateSettingsModal.classList.remove('hidden'); // Universal menu ko wapas dikhao
            leftButton.classList.add('hidden');
            rightButton.classList.add('hidden');
            MovingLeft = false, isMovingRight = false; let dragTarget = null, offsetX, offsetY; 
        
        function enterPositioningMode() {
            isPositioningControls = true;
            const positioningOverlay = document.getElementById('positioningOverlay');
            settingsModal.classList.add('hidden');
            positioningOverlay.classList.remove('hidden'); 
            leftButton.classList.remove('hidden');
            rightButton.classList.remove('hidden');
            [leftButton, rightButton].forEach(btn => {
                btn.addEventListener('mousedown', startDrag);
                btn.addEventListener('touchstart', startDrag);
            });
        } 

        function exitPositioningMode() {
            isPositioningControls = false;
            const positioningOverlay = document.getElementById('positioningOverlay');
            positioningOverlay.classList.add('hidden'); 
            settingsModal.classList.remove('hidden'); 
            leftButton.classList.add('hidden');
            rightButton.classList.add('hidden');localStorage.setItem('leftButtonPos', JSON.stringify({ top: leftButton.style.top, left: leftButton.style.left }));
            localStorage.setItem('rightButtonPos', JSON.stringify({ top: rightButton.style.top, left: rightButton.style.left }));
            [leftButton, rightButton].forEach(btn => {
                btn.removeEventListener('mousedown', startDrag);
                btn.removeEventListener('touchstart', startDrag);
            });
        }

        function startDrag(e) { e.preventDefault(); dragTarget = e.currentTarget; const event = e.
            localStorage.setItem('leftButtonPos', JSON.stringify({ top: leftButton.style.top, left: leftButton.style.left }));
            localStorage.setItem('rightButtonPos', JSON.stringify({ top: rightButton.styletype === 'touchstart' ? e.touches[0] : e; offsetX = event.clientX - dragTarget.offsetLeft; offsetY = event.clientY - dragTarget.offsetTop; document.addEventListener('mousemove', onDrag); document.addEventListener('touchmove', onDrag); document.addEventListener('mouseup', endDrag); document.addEventListener('touchend', endDrag);.top, left: rightButton.style.left }));
            [leftButton, rightButton].forEach(btn => {
                btn.removeEventListener('mousedown', startDrag);
                btn.removeEventListener('touchstart', startDrag);
            });
        }

        function startDrag(e) { e.preventDefault(); dragTarget = e.currentTarget; const } function onDrag(e) { if (!dragTarget) return; e.preventDefault(); const event = e.type === 'touchmove' ? e.touches[0] : e; let newLeft = event.clientX - offsetX; let newTop = event.clientY - offsetY; newLeft = Math.max(0, Math.min(newLeft, canvas.width - dragTarget.offsetWidth)); newTop = Math.max(0, Math.min( event = e.type === 'touchstart' ? e.touches[0] : e; offsetX = event.clientX - dragTarget.offsetLeft; offsetY = event.clientY - dragTarget.offsetTop; document.addEventListener('mousemove', onDrag); document.addEventListener('touchmove', onDrag); document.addEventListener('mouseup', endDrag); document.addEventListener('touchend', endDrag);newTop, canvas.height - dragTarget.offsetHeight)); dragTarget.style.left = `${newLeft}px`; dragTarget.style.top = `${newTop}px`; } function endDrag() { dragTarget = null; document.removeEventListener('mousemove', onDrag); document.removeEventListener('touchmove', onDrag); document.removeEventListener('mouseup', endDrag); document.removeEventListener('touchend', endDrag); }
        
        loadAssets(init);
    </script>
</body>
</html>
``` } function onDrag(e) { if (!dragTarget) return; e.preventDefault(); const event = e.type === 'touchmove' ? e.touches[0] : e; let newLeft = event.clientX - offsetX; let newTop = event.clientY - offsetY; newLeft = Math.max(0, Math.min(newLeft, canvas.width - dragTarget.offsetWidth)); newTop = Math.max(0, Math.min(newTop, canvas.height - dragTarget.offsetHeight)); dragTarget.style.left = `${newLeft}px`; dragTarget.style.top = `${newTop}px`; } function endDrag() { dragTarget = null; document.removeEventListener('mousemove', onDrag); document.removeEventListener('touchmove', onDrag); document.removeEventListener('mouseup', endDrag); document.removeEventListener('touchend', endDrag); }
        
        loadAssets(init);
    </script>
</body>
</html>
